webpackJsonp([15],{NbSV:function(a,t,e){var s=e("hJDr");"string"==typeof s&&(s=[[a.i,s,""]]),s.locals&&(a.exports=s.locals);e("rjj0")("2993a6f4",s,!0,{})},SVOP:function(a,t,e){"use strict";function s(a){e("NbSV")}Object.defineProperty(t,"__esModule",{value:!0});var r=e("r4Fr"),n={data:function(){return{id:null,token:sessionStorage.getItem("token")?sessionStorage.getItem("token"):localStorage.getItem("token"),data:[],cardTime:0,time:0,packageInfo:{},haveCard:{},battleCard:[],myGuessTimes:0}},created:function(){this.searchGuessCard()},filters:{capitalize:function(a){var t=new Date(parseInt(a));return[t.getHours()<10?"0"+t.getHours():t.getHours(),t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds()].join(":")}},mounted:function(){this.$emit("l2dMassage","这里可以进行猜卡，不仅可以获得猜中的卡，更可以获得丰厚的星星奖励！就算一张都没有猜中也可以获得宝石奖励！")},methods:{checkIndexOf:function(a,t){return t.indexOf(a)},send:function(){var a=this,t=this.data.filter(function(a){return a.sel});if(t.length<6)return this.$message.error("请选择6张卡牌！"),!1;var e=258;0===this.myGuessTimes?e=0:1===this.myGuessTimes&&(e=78),this.$confirm("猜卡将消耗"+e+"颗星星, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then(function(){for(var e=[],s=0;s<t.length;s++)e.push(t[s].index);var n={token:a.token,type:"buy",time:a.cardTime,id:a.id,cardIndex:e};r.a.userguesscard(n).then(function(t){0==t.data.code?a.$message.error(t.data.msg):1==t.data.code?(a.$message({message:t.data.msg,type:"success"}),a.$emit("updateUserinfo")):201==t.data.code&&a.$message.error(t.data.msg),a.searchGuessCard()})}).catch(function(){})},help:function(){this.$alert("系统每个整点会自动生成30张卡牌并自动结算上个整点选中的6张卡牌。<br />每位大佬可以选择6张心仪的卡牌，点击【猜卡】按钮上传选中的卡牌。<br />当天第一次猜卡免费，第二次猜卡消耗78星星，第三次以后每次消耗258星星。<br />然后等下一个整点公布结果后在【兑换】选项卡中兑换奖品。<br />系统将会根据猜中卡牌的张数发放对应的星星，同时还会获得猜中的卡牌。<br />奖品如下：<br />猜中零张卡牌：随机宝石×2。<br />猜中一张卡牌：10颗星星+猜中的卡牌。<br />猜中两张卡牌：30颗星星+猜中的卡牌。<br />猜中三张卡牌：160颗星星+猜中的卡牌。<br />猜中四张卡牌：2000颗星星+猜中的卡牌。<br />猜中五张卡牌：50000颗星星+猜中的卡牌。<br />猜中六张卡牌：500万颗星星+猜中的卡牌。",{dangerouslyUseHTMLString:!0,lockScroll:!1})},selCard:function(a){if(!this.data[a].sel&&this.data.filter(function(a){return a.sel}).length>=6)return this.$message({message:"最多只能选择6张卡牌！",type:"warning"}),!1;this.data[a].sel=!this.data[a].sel,this.$forceUpdate()},searchGuessCard:function(){var a=this,t={token:this.token};this.time=(new Date).getTime(),r.a.searchguesscard(t).then(function(t){if(0==t.data.code)a.$message.error(t.data.msg);else if(1==t.data.code){a.haveCard=t.data.myCardCount,a.battleCard=t.data.battleCard,a.data=t.data.data.card,a.id=t.data.data._id,a.myGuessTimes=t.data.myGuessTimes,a.cardTime=Number(t.data.data.time);for(var e=0;e<a.data.length;e++)a.data[e].sel=!1,a.data[e].index=e;for(var s=t.data.packageInfo,r=0;r<s.length;r++)a.packageInfo[s[r].packageId]=s[r].name}})}}},i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"wm_guesscard_content_body"},[a._m(0),a._v(" "),e("h6",{staticClass:"tc f14 mb15 mt5"},[0===a.myGuessTimes?e("span",[a._v("本次猜卡"),e("span",{staticClass:"cRed"},[a._v("免费")]),a._v("！")]):1===a.myGuessTimes?e("span",[a._v("本次猜卡将消耗"),e("span",{staticClass:"cRed"},[a._v("78")]),a._v("颗星星！")]):e("span",[a._v("本次猜卡消耗"),e("span",{staticClass:"cRed"},[a._v("288")]),a._v("颗星星！")]),e("span",[a._v("上次获取时间："+a._s(a._f("capitalize")(a.time))+"\n  "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击刷新",placement:"top"}},[e("i",{staticClass:"el-icon-refresh wm_set_pointer pl5 cRed",on:{click:function(t){return a.searchGuessCard()}}})])],1)]),a._v(" "),a.data.length>0?e("div",{staticClass:"wm_guesscard_card_body"},[e("el-row",{attrs:{gutter:5}},a._l(a.data,function(t,s){return e("el-col",{key:s,staticClass:"mb5",attrs:{span:4,xs:8}},[e("div",{staticClass:"wm_guesscard_col",on:{click:function(t){return a.selCard(s)}}},[e("img",{key:t.cardId,staticClass:"wm_guesscard_card_img",class:{wm_guesscard_nosel:!t.sel},attrs:{src:a.$wikimoecard.url+t.packageId+"/"+t.cardId+".jpg"}}),a._v(" "),e("div",{staticClass:"wm_guesscard_mark_box type_2 f12 cOrange ellipsis"},[e("span",{staticClass:"wm_guesscard_mark_item"},[a._v(a._s(a.packageInfo[t.packageId]))])]),a._v(" "),e("div",{staticClass:"wm_guesscard_mark_box f12 cRed ellipsis"},[-1!==a.checkIndexOf(t.cardId,a.battleCard)?e("span",{staticClass:"wm_guesscard_mark_item"},[a._v("战")]):a._e(),a._v(" "),e("span",{staticClass:"wm_guesscard_mark_item cGreen1A7"},[a._v("持:"+a._s(a.haveCard[t.cardId]))])])])])}),1),a._v(" "),e("div",{staticClass:"wm_guesscard_btn_body"},[e("el-button",{attrs:{type:"primary"},on:{click:a.send}},[a._v("猜卡")]),a._v(" "),e("el-button",{on:{click:a.help}},[a._v("说明")])],1)],1):a._e()])},d=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("h6",{staticClass:"mt20 tc f16"},[e("span",[a._v("每个整点更新一次猜卡！")])])}],c={render:i,staticRenderFns:d},o=c,l=e("VU/8"),u=s,m=l(n,o,!1,u,"data-v-759ada86",null);t.default=m.exports},hJDr:function(a,t,e){t=a.exports=e("FZ+f")(!1),t.push([a.i,"\n.wm_guesscard_card_img[data-v-759ada86]{\r\n  width: 100%;\r\n  height: auto;\n}\n.wm_guesscard_nosel[data-v-759ada86]{\r\n  opacity: 0.4;\n}\n.wm_guesscard_btn_body[data-v-759ada86]{\r\n    padding: 20px 0;\r\n    text-align: center;\r\n    background-color: #fff;\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    z-index: 999;\n}\n.wm_guesscard_col[data-v-759ada86]{\r\n  padding-bottom: 140%;\r\n  position: relative;\r\n  z-index: 1;\r\n  cursor: url(/static/cur/pointer.cur),pointer;\n}\n.wm_guesscard_col img[data-v-759ada86]{\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\n}\n.wm_guesscard_mark_box[data-v-759ada86]{\r\n  z-index: 2;\r\n  position: absolute;\r\n  bottom: 5px;\r\n  left: 5px;\r\n  right: 5px;\n}\n.wm_guesscard_mark_box.type_2[data-v-759ada86]{\r\n  bottom: 24px;\n}\n.wm_guesscard_mark_item[data-v-759ada86]{\r\n  background-color: rgba(255,255,255,0.8);\r\n  padding: 0px 3px;\n}\r\n",""])}});