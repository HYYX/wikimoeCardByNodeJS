webpackJsonp([3],{Dh1e:function(t,e,n){"use strict";function r(t){n("Ke6Z")}Object.defineProperty(e,"__esModule",{value:!0});var s=n("r4Fr"),a={data:function(){return{form:{account:"",password:"",dailyChance:"",smtpHost:"",smtpPort:"",smtpAuthUser:"",smtpAuthPass:"",sessionSecret:"",JWTSecret:""}}},mounted:function(){this.chekInstall()},methods:{chekInstall:function(){var t=this;s.a.admincheckinstall().then(function(e){1!=e.data.code&&t.$router.replace({path:"/"})})},onSubmit:function(){var t=this;for(var e in this.form)if(!this.form[e])return this.$message.error("有数据为空，请检查！"),!1;if(this.form.dailyChance=Math.abs(Math.round(this.form.dailyChance)),this.form.smtpPort=Math.abs(Math.round(this.form.smtpPort)),isNaN(this.form.dailyChance))return this.$message.error("抽卡次数必须为数字"),!1;if(isNaN(this.form.smtpPort))return this.$message.error("端口必须为数字"),!1;var n={config:this.form};s.a.admininstall(n).then(function(e){1==e.data.code?t.$alert("恭喜您，安装成功！","提示",{confirmButtonText:"确定",showClose:!1,callback:function(e){t.$router.push({path:"/"})}}):t.$message.error(e.data.msg)})},backIndex:function(){this.$router.push({path:"/"})}}},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"common_body"},[n("h5",{staticClass:"common_title"},[t._v("初始化安装")]),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"140px"}},[n("el-form-item",{attrs:{label:"管理员账号"}},[n("el-input",{attrs:{placeholder:"请设定管理员账号"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"管理员密码"}},[n("el-input",{attrs:{"show-password":"",placeholder:"请设定管理员密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"每日抽卡次数"}},[n("el-input",{attrs:{placeholder:"请设定每日抽卡次数",type:"number"},model:{value:t.form.dailyChance,callback:function(e){t.$set(t.form,"dailyChance",e)},expression:"form.dailyChance"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮件发送host"}},[n("el-input",{attrs:{placeholder:"请设定邮件发送host地址"},model:{value:t.form.smtpHost,callback:function(e){t.$set(t.form,"smtpHost",e)},expression:"form.smtpHost"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮件发送端口"}},[n("el-input",{attrs:{placeholder:"请设定邮件发送端口",type:"number"},model:{value:t.form.smtpPort,callback:function(e){t.$set(t.form,"smtpPort",e)},expression:"form.smtpPort"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱账户"}},[n("el-input",{attrs:{placeholder:"请设定邮箱账户"},model:{value:t.form.smtpAuthUser,callback:function(e){t.$set(t.form,"smtpAuthUser",e)},expression:"form.smtpAuthUser"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"邮箱密码"}},[n("el-input",{attrs:{"show-password":"",placeholder:"请设定邮箱密码"},model:{value:t.form.smtpAuthPass,callback:function(e){t.$set(t.form,"smtpAuthPass",e)},expression:"form.smtpAuthPass"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"session"}},[n("el-input",{attrs:{placeholder:"用于session加密的字符串"},model:{value:t.form.sessionSecret,callback:function(e){t.$set(t.form,"sessionSecret",e)},expression:"form.sessionSecret"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"JWTSecret"}},[n("el-input",{attrs:{placeholder:"用于JWT加密字符串"},model:{value:t.form.JWTSecret,callback:function(e){t.$set(t.form,"JWTSecret",e)},expression:"form.JWTSecret"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("安装")]),t._v(" "),n("el-button",{on:{click:t.backIndex}},[t._v("返回首页")])],1)],1)],1)},i=[],l={render:o,staticRenderFns:i},c=l,m=n("VU/8"),d=r,u=m(a,c,!1,d,"data-v-63b3ce97",null);e.default=u.exports},H0k6:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"\n.wmcard_admin_center{\r\n  min-height: 100vh;\n}\n.wmcard_admin_center .el-menu{\r\n  min-height: 100%;\n}\n.wmcard_admin_header{\r\n  height: 60px;\r\n  line-height: 60px;\r\n  color: #fff;\r\n  background-color: #000;\n}\n.wmcard_admin_header_link{\r\n  color: #fff;\n}\n.wmcard_admincenter_common_right_body{\r\n  min-width: 600px;\n}\n.wmcard_user_page{\r\n  text-align: center;\r\n  padding: 20px 0;\n}\r\n/* 新闻 */\n.wmcard_admincenter_news_text{\r\n  white-space:nowrap; \r\n\toverflow:hidden; \r\n  text-overflow:ellipsis;\r\n  max-width: 250px;\n}\r\n",""])},Ke6Z:function(t,e,n){var r=n("x40K");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("cbc7a608",r,!0,{})},NQeC:function(t,e,n){"use strict";function r(t){n("kzMs")}Object.defineProperty(e,"__esModule",{value:!0});var s=n("r4Fr"),a={data:function(){return{token:sessionStorage.getItem("adminToken")?sessionStorage.getItem("adminToken"):localStorage.getItem("adminToken")}},methods:{goLink:function(t){this.$router.push({path:t})},logout:function(){var t=this,e={token:this.token};s.a.adminlogout(e).then(function(e){1==e.data.code?(t.$message({message:"成功登出！",type:"success"}),sessionStorage.removeItem("adminToken"),localStorage.removeItem("adminToken"),t.$router.replace("/cardadmin")):t.$message.error(e.data.msg)})}}},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-container",{staticClass:"wmcard_admin_center"},[n("el-header",{staticClass:"wmcard_admin_header"},[n("router-link",{staticClass:"wmcard_admin_header_link",attrs:{to:"/cardadmin/center"}},[t._v("维基萌抽卡管理后台")])],1),t._v(" "),n("el-container",[n("el-aside",{attrs:{width:"160px"}},[n("el-menu",[n("el-menu-item",{attrs:{index:"1"},on:{click:function(e){return t.goLink("/cardadmin/center/setting")}}},[n("i",{staticClass:"el-icon-setting"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("设置")])]),t._v(" "),n("el-menu-item",{attrs:{index:"2"},on:{click:function(e){return t.goLink("/cardadmin/center/givestar")}}},[n("i",{staticClass:"el-icon-star-off"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("赠与")])]),t._v(" "),n("el-menu-item",{attrs:{index:"3"},on:{click:function(e){return t.goLink("/cardadmin/center/userlist")}}},[n("i",{staticClass:"el-icon-tickets"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户列表")])]),t._v(" "),n("el-menu-item",{attrs:{index:"4"},on:{click:function(e){return t.goLink("/cardadmin/center/newslist")}}},[n("i",{staticClass:"el-icon-news"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("新闻")])]),t._v(" "),n("el-menu-item",{attrs:{index:"5"},on:{click:function(e){return t.goLink("/cardadmin/center/secretkey")}}},[n("i",{staticClass:"el-icon-key"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("设置Key")])]),t._v(" "),n("el-menu-item",{attrs:{index:"6"},on:{click:function(e){return t.goLink("/cardadmin/center/adminlogs")}}},[n("i",{staticClass:"el-icon-notebook-2"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("系统日志")])]),t._v(" "),n("el-menu-item",{attrs:{index:"7"},on:{click:function(e){return t.goLink("/cardadmin/center/passwordchange")}}},[n("i",{staticClass:"el-icon-edit-outline"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("密码修改")])]),t._v(" "),n("el-menu-item",{attrs:{index:"8"},on:{click:function(e){return t.logout()}}},[n("i",{staticClass:"el-icon-upload2"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("登出")])])],1)],1),t._v(" "),n("el-main",[n("router-view")],1)],1)],1)],1)},i=[],l={render:o,staticRenderFns:i},c=l,m=n("VU/8"),d=r,u=m(a,c,!1,d,null,null);e.default=u.exports},kzMs:function(t,e,n){var r=n("H0k6");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("750ac574",r,!0,{})},x40K:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"",""])}});