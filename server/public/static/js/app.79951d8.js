webpackJsonp([2],{"+BTi":function(e,t){},EfxW:function(e,t){},Fik4:function(e,t){},"J+GG":function(e,t){},NHnr:function(e,t,a){"use strict";function r(e){a("wB98")}function s(e){a("Fik4")}function i(e){a("ePMA")}function o(e){a("J+GG")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),c=a.n(n),l=(a("+BTi"),a("lRwf")),d=a.n(l),m=a("SJI6"),u=a.n(m),f={},v={},h={namespaced:!0,state:f,mutations:v},p=new u.a.Store({modules:{app:h}}),_=p,g=a("pRNm"),w=a.n(g),b=a("OMN4"),k=a.n(b),C=function(e){return k.a.create(e)}({baseURL:"/api"}),$=function(e){return{login:function(t){return e.post("login",t)},dailycard:function(t){return e.post("dailycard",t)},reg:function(t){return e.post("reg",t)}}}(C),x=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},y=function(e){return/^\d{4,8}$/.test(e)},L=function(e){return/^[\u4E00-\u9FA5\u0800-\u4e00A-Za-z0-9_]{2,8}$/.test(e)},R={props:{trigger:{type:String,default:"click"},value:{type:Boolean,default:!0},direction:{type:String,default:"row"},cardSrc:{type:String,default:""}},data:function(){return{surface:!0}},watch:{value:function(e){console.log(this.value),"custom"==this.trigger&&this.fn_reserve_action(e)}},methods:{fn_reserve_action:function(e){var t="row"==this.direction?["rotateY(180deg)","rotateY(0deg)","rotateY(-180deg)"]:["rotateX(180deg)","rotateX(0deg)","rotateX(-180deg)"];this.$refs.cardz.style.transform=e?t[0]:t[1],this.$refs.cardf.style.transform=e?t[1]:t[2]},eve_cardres_click:function(){"click"==this.trigger&&(this.fn_reserve_action(this.surface),this.surface=!this.surface)},eve_cardres_msover:function(){"hover"==this.trigger&&this.fn_reserve_action(!0)},eve_cardres_msout:function(){"hover"==this.trigger&&this.fn_reserve_action(!1)}}},I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-3d",on:{click:e.eve_cardres_click,mouseover:e.eve_cardres_msover,mouseout:e.eve_cardres_msout}},[a("div",{ref:"cardz",staticClass:"card card-z"},[e._t("cz")],2),e._v(" "),a("div",{ref:"cardf",class:["card","row"==e.direction?"card-f-y":"card-f-x"]},[e._t("cf",[""!==e.cardSrc?a("img",{staticClass:"wm_getcard_img",attrs:{width:"100%",height:"100%",src:e.cardSrc}}):e._e()])],2)])},E=[],S={render:I,staticRenderFns:E},N=S,B=a("VU/8"),D=r,T=B(R,N,!1,D,null,null),z=T.exports,V={data:function(){return{remEmail:!1,email:"",getCardList:["","",""],cardIsRotate:[!1,!1,!1],seled:!1,restartDisabled:!0}},components:{rotate3DCard:z},mounted:function(){this.getRememberEmail()},methods:{getRememberEmail:function(){var e=window.localStorage;e.getItem("wikimoeEmail")&&(this.email=e.getItem("wikimoeEmail"),this.remEmail=!0)},rememberEmail:function(){var e=window.localStorage;this.remEmail?e.setItem("wikimoeEmail",this.email):e.removeItem("wikimoeEmail")},restart:function(){var e=this;this.restartDisabled=!0,this.$refs.cardListBody.children[0].classList.remove("no-selectedcard"),this.$refs.cardListBody.children[1].classList.remove("no-selectedcard"),this.$refs.cardListBody.children[2].classList.remove("no-selectedcard"),this.cardIsRotate=[!1,!1,!1],setTimeout(function(){e.getCardList=["","",""],e.seled=!1},800)},getDailyCard:function(e){var t=this;return!this.seled&&(x(!this.email)?(this.$message.error("邮箱格式不正确！"),!1):(console.log(e),void $.dailycard({email:this.email,sel:e}).then(function(e){if(console.log(e),0==e.data.code)t.$message.error(e.data.msg);else if(1==e.data.code){t.rememberEmail(),t.seled=!0;var a=e.data;t.$set(t.getCardList,0,"/static/img/"+a.cardChoiseList[0]+".jpg"),t.$set(t.getCardList,1,"/static/img/"+a.cardChoiseList[1]+".jpg"),t.$set(t.getCardList,2,"/static/img/"+a.cardChoiseList[2]+".jpg"),t.$set(t.cardIsRotate,a.choiseIndex,!0);for(var r=0;r<3;r++)!function(e){e!==a.choiseIndex&&(setTimeout(function(){t.$refs.cardListBody.children[e].classList.add("no-selectedcard"),t.restartDisabled=!1},950),setTimeout(function(){t.$set(t.cardIsRotate,e,!0)},800))}(r)}else 2==e.data.code&&t.$confirm("您尚未注册，是否进入注册页？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.push({path:"/reg"})}).catch(function(){})})))}}},F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h5",{staticClass:"wm_card_chiose_title"},[e._v("欢迎来到维基萌抽卡")]),e._v(" "),a("div",{staticClass:"wm_card_email_body"},[a("transition",{attrs:{name:"el-fade-in-linear"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.seled,expression:"!seled"}],staticClass:"wm_card_email_input_body"},[a("el-input",{staticClass:"wm_card_email",attrs:{placeholder:"请先输入邮箱地址再点击卡片"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)]),e._v(" "),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.seled,expression:"seled"}],staticClass:"wm_card_restart_body"},[a("el-button",{attrs:{type:"primary",disabled:e.restartDisabled},on:{click:e.restart}},[e._v("重新抽卡")])],1)])],1),e._v(" "),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("div",{staticClass:"wm_card_remember_body"},[a("el-checkbox",{model:{value:e.remEmail,callback:function(t){e.remEmail=t},expression:"remEmail"}},[e._v("抽卡并保存邮箱地址")])],1)]),e._v(" "),a("div",{staticClass:"cardList"},[a("div",{ref:"cardListBody",staticClass:"cardList_body"},[a("div",{staticClass:"card_list",class:e.seled?"selectedcard":"",on:{click:function(t){return e.getDailyCard(0)}}},[a("rotate3DCard",{attrs:{trigger:"custom",direction:"row",cardSrc:e.getCardList[0]},model:{value:e.cardIsRotate[0],callback:function(t){e.$set(e.cardIsRotate,0,t)},expression:"cardIsRotate[0]"}},[e._t("cz"),e._v(" "),e._t("cf")],2)],1),e._v(" "),a("div",{staticClass:"card_list",class:e.seled?"selectedcard":"",on:{click:function(t){return e.getDailyCard(1)}}},[a("rotate3DCard",{attrs:{trigger:"custom",direction:"row",cardSrc:e.getCardList[1]},model:{value:e.cardIsRotate[1],callback:function(t){e.$set(e.cardIsRotate,1,t)},expression:"cardIsRotate[1]"}},[e._t("cz"),e._v(" "),e._t("cf")],2)],1),e._v(" "),a("div",{staticClass:"card_list",class:e.seled?"selectedcard":"",on:{click:function(t){return e.getDailyCard(2)}}},[a("rotate3DCard",{attrs:{trigger:"custom",direction:"row",cardSrc:e.getCardList[2]},model:{value:e.cardIsRotate[2],callback:function(t){e.$set(e.cardIsRotate,2,t)},expression:"cardIsRotate[2]"}},[e._t("cz"),e._v(" "),e._t("cf")],2)],1)])])],1)},M=[],J={render:F,staticRenderFns:M},O=J,U=a("VU/8"),j=s,A=U(V,O,!1,j,"data-v-50a585ac",null),G=A.exports,Y={data:function(){return{form:{email:"",password:"",code:"",nickName:""}}},methods:{onSubmit:function(){var e=this;return x(this.form.email)?y(this.form.password)?L(this.form.nickName)?void $.reg({email:this.form.email,password:this.form.password,nickName:this.form.nickName}).then(function(t){if(console.log(t),0==t.data.code)e.$message.error(t.data.msg);else if(1==t.data.code){t.data;e.$alert("恭喜您，注册成功！","提示",{confirmButtonText:"确定",showClose:!1,callback:function(t){e.$router.push({path:"/"})}})}}):(this.$message.error("昵称只能允许为2-8位中英日数字与下划线！"),!1):(this.$message.error("密码必须为4-8位纯数字！"),!1):(this.$message.error("邮箱格式有误！"),!1)},backIndex:function(){this.$router.push({path:"/"})},emailToLowerCase:function(){this.form.email=this.form.email.toLowerCase()}}},H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reg_body"},[a("h5",{staticClass:"common_title"},[e._v("注册账号")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"邮箱地址"}},[a("el-input",{attrs:{placeholder:"请输入邮箱地址"},on:{input:e.emailToLowerCase},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{attrs:{placeholder:"昵称格式为2-8位中英日数字下划线"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请输入4-8位纯数字"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱验证"}},[a("el-input",{attrs:{placeholder:"邮箱验证码功能未完成，留空"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}},[a("el-button",{attrs:{slot:"append"},slot:"append"},[e._v("发送验证码")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("注册抽卡")]),e._v(" "),a("el-button",{on:{click:e.backIndex}},[e._v("返回首页")])],1)],1)],1)},P=[],X={render:H,staticRenderFns:P},W=X,q=a("VU/8"),K=i,Z=q(Y,W,!1,K,"data-v-590ba770",null),Q=Z.exports,ee=function(){return a.e(0).then(a.bind(null,"KHiY"))},te=new w.a({mode:"history",scrollBehavior:function(e,t,a){return a||(a={x:0,y:0}),a},routes:[{name:"home",path:"/",component:G},{name:"reg",path:"/reg",component:Q},{name:"404",path:"/404",component:ee},{path:"*",redirect:"/404"}]}),ae=te,re=a("woOf"),se=a.n(re),ie={};ie.install=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ie.install.installed){ie.install.installed=!0;var a=e;se()(k.a.defaults,t),a.$http=k.a,a.prototype.$http=k.a}},window.Vue&&window.Vue.use(ie);var oe=ie,ne=a("zL8q"),ce=a.n(ne),le=(a("tvR6"),{data:function(){return{}}}),de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},me=[],ue={render:de,staticRenderFns:me},fe=ue,ve=a("VU/8"),he=o,pe=ve(le,fe,!1,he,"data-v-3076ff55",null),_e=pe.exports;a("u7k/"),a("EfxW");d.a.use(ce.a),d.a.use(oe);var ge=new d.a(c()({},_e,{router:ae,store:_}));document.addEventListener("DOMContentLoaded",function(){ge.$mount("#app")})},OMN4:function(e,t){e.exports=axios},SJI6:function(e,t){e.exports=Vuex},ePMA:function(e,t){},lRwf:function(e,t){e.exports=Vue},pRNm:function(e,t){e.exports=VueRouter},tvR6:function(e,t){},"u7k/":function(e,t){},wB98:function(e,t){}},["NHnr"]);